{"version":3,"sources":["../src/app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["import express from 'express';\nimport path from 'path';\nimport favicon from 'serve-favicon';\nimport logger from 'morgan';\nimport cookieParser from 'cookie-parser';\nimport bodyParser from 'body-parser';\nimport fs from 'fs';\n\nimport routes from './routes/index';\nimport search from './routes/search';\n\n\nvar app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'ejs');\n\n// uncomment after placing your favicon in /public\n//app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));\napp.use(logger('dev'));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(require('node-sass-middleware')({\n  src: path.join(__dirname, 'public'),\n  dest: path.join(__dirname, 'public'),\n  indentedSyntax: true,\n  sourceMap: true\n}));\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.use('/', routes);\napp.use('/search', search);\n\n// catch 404 and forward to error handler\napp.use(function(req, res, next) {\n  var err = new Error('Not Found');\n  err.status = 404;\n  next(err);\n});\n\n// error handlers\n\n// development error handler\n// will print stacktrace\nif (app.get('env') === 'development') {\n  app.use(function(err, req, res, next) {\n    res.status(err.status || 500);\n    res.render('error', {\n      message: err.message,\n      error: err\n    });\n  });\n}\n\n// production error handler\n// no stacktraces leaked to user\napp.use(function(err, req, res, next) {\n  res.status(err.status || 500);\n  res.render('error', {\n    message: err.message,\n    error: {}\n  });\n});\n\n\n\n// 去空格\napp.locals.trimAll = function(str){\n  return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\n}\n\n// 替换关键字\napp.locals.markWord = function(str,word){\n  var s = str.replace(decodeURI(word),'<b>'+decodeURI(word)+'</b>');\n  return s;\n}\n\n// 编码URI\napp.locals.decodeURI = function(str){\n  return decodeURI(str);\n}\n\n/*公共*/\n// MD5加密\nglobal.md5 = function(data) {\n    var Buffer = require(\"buffer\").Buffer;\n    var buf = new Buffer(data);\n    var str = buf.toString(\"binary\");\n    var crypto = require(\"crypto\");\n    return crypto.createHash(\"md5\").update(str).digest(\"hex\");\n}\nglobal.trimAll = function(str){\n  return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\n}\n\nmodule.exports = app;\n"]}